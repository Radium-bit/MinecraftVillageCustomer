# Minecraft 村民交易指令生成器

---

## 简介

这是一款基于Python开发的图形界面工具，专为Minecraft设计，可快速生成自定义村民的交易指令。支持配置村民名称、职业、交易项（绿宝石买物品
 / 物品换绿宝石），并提供交易项保存 / 加载、批量反转、排序等功能，最终输出符合游戏语法的 `/data modify` 指令，无需手动编写复杂 NBT 标签。

本软件采用 **GPL-V3 许可证** 开源发布，您可自由使用、修改和分发。

[Looking for English docs? Click here!](README_EN.md)

---

## ✨ 核心功能

- ✅ 自定义村民基础信息：名称、职业（13 种默认职业可选，默认等级 5 级）
- ✅ 灵活编辑交易项：
  - 支持 “绿宝石买物品” 和 “物品换绿宝石” 两种交易模式
  - 自定义物品 ID（自动补全`minecraft:`前缀）、数量和最大交易次数
- ✅ 交易项管理：
  - 右键列表项可直接修改参数
  - 支持多选删除、单个项上下排序
  - 一键反转所有交易项并追加（如 “1 绿宝石换 4 鸡蛋”→“4 鸡蛋换 1 绿宝石”）
- ✅ 配置保存与加载：将当前村民配置（名称、职业、交易项）保存为 JSON 文件，或加载已有 JSON 预设
- ✅ 规范指令生成：自动生成符合游戏语法的指令，确保`limit=1]`与`set`间保留两个空格，无需手动检查格式

---

## 📥 下载与使用

### 1. 直接使用（推荐普通用户）

获取打包后的 EXE 文件（需从开源仓库或发布页下载），双击即可运行，无需安装 Python 环境。

### 2. 源代码运行（推荐开发者）

#### 环境要求

- Python 版本：≥3.7（兼容 3.x 主流版本）
- 依赖库：无需额外安装（基于 Python 标准库`tkinter`，无第三方依赖）

#### 运行步骤

1. 下载源代码文件（如`main.py`）
2. 打开命令行，进入源代码目录
3. 执行命令：`python main.py`，启动图形界面

---

## 🛠️ 打包为单文件 EXE

若需自行打包，确保已安装 `PyInstaller`，步骤如下：

### 1. 安装依赖

bash

```bash
pip install pyinstaller
```

### 2. 准备.spec 文件

在源代码目录生成或使用已有`main.spec`文件（用于指定打包参数，如窗口模式、图标等）。

### 3. 执行打包命令

在命令行中进入源代码目录，运行：

bash

```bash
pyinstaller .\main.spec
```

打包完成后，可在生成的`dist`文件夹中找到单文件 EXE（文件名与`.spec`文件一致）。

---

## 🚀 使用教程

### 1. 编辑村民信息

- 在 “村民基础信息” 区域：输入村民名称（默认 “CustomName”），从下拉框选择职业（默认 “armorer” 盔甲匠）

### 2. 添加交易项

1. 在 “交易项编辑” 区域选择交易模式（如 “绿宝石买物品”）
2. 输入`Buy`方和`Sell`方的物品 ID、数量，以及最大交易次数（默认 256 次）
3. 点击 “添加交易项”，新交易项会显示在下方列表中（浅灰绿 = 绿换物，浅灰粉 = 物换绿，隔行灰度区分）

### 3. 管理交易项

- **修改参数**：右键列表中的目标交易项，选择 “修改此交易项”，编辑框会自动填充当前参数，修改后点击 “修改交易项” 保存
- **排序**：选中单个交易项，点击 “上移选中项” 或 “下移选中项” 调整顺序
- **删除**：按住 Ctrl 键多选交易项，点击 “删除选中交易” 批量移除
- **反转追加**：点击 “一键反转追加交易”，将所有现有交易项反转后追加到列表末尾

### 4. 保存 / 加载配置

- **保存**：点击顶部 “保存配置到 JSON”，选择路径并命名，配置会以 JSON 格式保存（包含名称、职业、所有交易项）
- **加载**：点击顶部 “加载 JSON 预设”，选择已有的 JSON 配置文件，自动覆盖当前村民信息和交易项

### 5. 生成指令

所有配置完成后，点击 “生成指令” 按钮，下方文本框会显示完整的`/data modify`指令，复制后直接在游戏作弊模式下使用即可。

---

## ⚠️ 注意事项

1. 物品 ID 需准确：若输入自定义模组物品（如`kaleidoscope_cookery:iron_kitchen_knife`），需确保游戏中已加载对应模组，否则指令生效后村民可能无法正常显示交易
2. 右键修改限制：仅支持单个交易项修改，多选时右键菜单不显示 “修改” 选项
3. JSON 配置兼容性：加载的 JSON 文件需符合工具指定格式（包含`villager_name`、`profession`、`trades`关键字段），否则会提示加载失败

---

## 📄 许可证声明

本项目基于 **GPL-V3 许可证** 开源，详细条款请参见 [LICENSE](https://www.gnu.org/licenses/gpl-3.0.html) 文件。您在使用本软件时，需遵守以下原则：

- 允许非商业和商业使用
- 允许修改源代码，但修改后分发需保持相同许可证
- 需保留原作者信息和许可证声明
- 不得限制他人的合法权利
